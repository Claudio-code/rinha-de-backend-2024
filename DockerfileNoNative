FROM amazoncorretto:21-alpine-jdk as builder

WORKDIR /builder

COPY . .

RUN ./gradlew build -x test

FROM amazoncorretto:21-alpine

COPY --from=builder /builder/build/libs/application.jar /app.jar

ENTRYPOINT ["java", "-jar", "app.jar", "-Xms50m", "-Xmx300m", "-XX:MaxMetaspaceSize=256m", "-XX:+UseShenandoahGC"]
