FROM amazoncorretto:21-alpine-jdk as builder

WORKDIR /builder

COPY . .

RUN ./gradlew build -x test

FROM amazoncorretto:21-alpine

COPY --from=builder /builder/build/libs/application.jar /app.jar

ENTRYPOINT ["java", "-Xms50m", "-Xmx130m", "-XX:MaxMetaspaceSize=156m", "-XX:+UseSerialGC" , "-jar", "app.jar"]
